---
import { type CollectionEntry, getCollection } from "astro:content";
import PostDetails from "@layouts/PostDetails.astro";
import getSortedPosts from "@utils/getSortedPosts";
import articlesCollection from "../../../content/collection/articles";

export interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;

export async function getStaticPaths() {
  const article = await articlesCollection.get("wew-wew-wew");

  return [
    {
      params: {
        slug: article?.slug,
      },
      props: {
        post: {
          slug: article?.slug,
          data: {
            author: article?.author,
            pubDatetime: article?.date_posted
              ? new Date(article.date_posted)
              : nullhttp://localhost:4321/,
            modDatetime: article?.updated ? new Date(article.updated) : null,
            title: article?.title,
            content: article?.content,
            featured: article?.featured,
            draft: article?.draft,
            tags: [article?.category],
            description: article?.conclusion,
          },
        },
      },
    },
  ];
}

// const posts = await getCollection("blog");
// const sortedPosts = getSortedPosts(posts);
---

<PostDetails post={post} posts={[]} />
